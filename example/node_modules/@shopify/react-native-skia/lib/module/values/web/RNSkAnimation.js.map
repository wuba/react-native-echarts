{"version":3,"names":["RNSkClockValue","RNSkAnimation","constructor","callback","raf","undefined","_callback","cancel","stop","update","nextValue","_animationState","finished","current"],"sources":["RNSkAnimation.ts"],"sourcesContent":["import type { AnimationState, SkiaAnimation } from \"../types\";\n\nimport { RNSkClockValue } from \"./RNSkClockValue\";\n\nexport class RNSkAnimation<S extends AnimationState = AnimationState>\n  extends RNSkClockValue\n  implements SkiaAnimation\n{\n  constructor(\n    callback: (t: number, state: S | undefined) => S,\n    raf: (callback: (time: number) => void) => number\n  ) {\n    super(raf);\n    this._callback = callback;\n  }\n\n  private _callback: (t: number, state: S | undefined) => S;\n  private _animationState: S | undefined = undefined;\n\n  public cancel() {\n    this.stop();\n  }\n\n  protected update(nextValue: number): void {\n    if (this._callback) {\n      this._animationState = this._callback(nextValue, this._animationState);\n      if (this._animationState?.finished) {\n        this.stop();\n      }\n    }\n    super.update(this._animationState?.current ?? nextValue);\n  }\n}\n"],"mappings":";;AAEA,SAASA,cAAT,QAA+B,kBAA/B;AAEA,OAAO,MAAMC,aAAN,SACGD,cADH,CAGP;EACEE,WAAW,CACTC,QADS,EAETC,GAFS,EAGT;IACA,MAAMA,GAAN;;IADA;;IAAA,yCAMuCC,SANvC;;IAEA,KAAKC,SAAL,GAAiBH,QAAjB;EACD;;EAKMI,MAAM,GAAG;IACd,KAAKC,IAAL;EACD;;EAESC,MAAM,CAACC,SAAD,EAA0B;IAAA;;IACxC,IAAI,KAAKJ,SAAT,EAAoB;MAAA;;MAClB,KAAKK,eAAL,GAAuB,KAAKL,SAAL,CAAeI,SAAf,EAA0B,KAAKC,eAA/B,CAAvB;;MACA,6BAAI,KAAKA,eAAT,kDAAI,sBAAsBC,QAA1B,EAAoC;QAClC,KAAKJ,IAAL;MACD;IACF;;IACD,MAAMC,MAAN,qDAAa,KAAKE,eAAlB,2DAAa,uBAAsBE,OAAnC,2EAA8CH,SAA9C;EACD;;AAxBH"}