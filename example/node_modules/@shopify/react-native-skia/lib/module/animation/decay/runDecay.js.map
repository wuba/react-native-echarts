{"version":3,"names":["ValueApi","decay","runDecay","value","config","resolvedConfig","deceleration","velocityFactor","velocity","from","current","updateFunction","t","state","finished","lastTimestamp","startTimestamp","initialVelocity","animation","createAnimation"],"sources":["runDecay.ts"],"sourcesContent":["import { ValueApi } from \"../../values/api\";\nimport type { SkiaMutableValue } from \"../../values/types\";\n\nimport { decay } from \"./decay\";\nimport type { DecayConfig, DefaultDecayConfig, DecayState } from \"./types\";\n\n/**\n * Runs a decay animation from the current value to zero with the given decay\n * configuration.\n * @param value value to animate\n * @param config Configuration or default configuration\n * @returns Animation\n */\nexport const runDecay = (\n  value: SkiaMutableValue<number>,\n  config?: DecayConfig\n) => {\n  const resolvedConfig: DefaultDecayConfig = {\n    deceleration: 0.998,\n    velocityFactor: 1,\n    velocity: 0,\n    from: value.current,\n    ...config,\n  };\n  const updateFunction = (t: number, state: DecayState | undefined) => {\n    if (!state) {\n      return {\n        current: resolvedConfig.from,\n        finished: false,\n        lastTimestamp: t,\n        startTimestamp: t,\n        initialVelocity: resolvedConfig.velocity,\n        velocity: resolvedConfig.velocity,\n      };\n    }\n    return decay(t, state, resolvedConfig);\n  };\n  value.animation = ValueApi.createAnimation(updateFunction);\n  return value.animation;\n};\n"],"mappings":"AAAA,SAASA,QAAT,QAAyB,kBAAzB;AAGA,SAASC,KAAT,QAAsB,SAAtB;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,QAAQ,GAAG,CACtBC,KADsB,EAEtBC,MAFsB,KAGnB;EACH,MAAMC,cAAkC,GAAG;IACzCC,YAAY,EAAE,KAD2B;IAEzCC,cAAc,EAAE,CAFyB;IAGzCC,QAAQ,EAAE,CAH+B;IAIzCC,IAAI,EAAEN,KAAK,CAACO,OAJ6B;IAKzC,GAAGN;EALsC,CAA3C;;EAOA,MAAMO,cAAc,GAAG,CAACC,CAAD,EAAYC,KAAZ,KAA8C;IACnE,IAAI,CAACA,KAAL,EAAY;MACV,OAAO;QACLH,OAAO,EAAEL,cAAc,CAACI,IADnB;QAELK,QAAQ,EAAE,KAFL;QAGLC,aAAa,EAAEH,CAHV;QAILI,cAAc,EAAEJ,CAJX;QAKLK,eAAe,EAAEZ,cAAc,CAACG,QAL3B;QAMLA,QAAQ,EAAEH,cAAc,CAACG;MANpB,CAAP;IAQD;;IACD,OAAOP,KAAK,CAACW,CAAD,EAAIC,KAAJ,EAAWR,cAAX,CAAZ;EACD,CAZD;;EAaAF,KAAK,CAACe,SAAN,GAAkBlB,QAAQ,CAACmB,eAAT,CAAyBR,cAAzB,CAAlB;EACA,OAAOR,KAAK,CAACe,SAAb;AACD,CA1BM"}