{"version":3,"sources":["../../../../src/utils/analytics/getMetroProperties.ts"],"sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { resolveMetroVersionFromProject } from '../../start/server/metro/resolveFromProject';\n\n/**\n * Get the unstable / experimental properties used within the Metro config.\n * Note that this should match `metro-config`, but uses newer features that are not yet typed.\n *\n * @see https://github.com/facebook/metro/blob/1d51ffd33f54dba25c54b49ff059543dac519f21/packages/metro-config/src/configTypes.flow.js\n */\nexport function getMetroProperties(\n  projectRoot: string,\n  exp: ExpoConfig,\n  metroConfig: Record<string, any> = {}\n) {\n  return {\n    sdkVersion: exp.sdkVersion,\n    metroVersion: resolveMetroVersionFromProject(projectRoot),\n\n    fileMapCacheManagerFactory:\n      Boolean(metroConfig.unstable_fileMapCacheManagerFactory) || undefined, // CacheManagerFactory\n    perfLogger: Boolean(metroConfig.unstable_perfLogger) || undefined, // PerfLoggerFactory\n\n    resolverEnableSymlinks: metroConfig.resolver?.unstable_enableSymlinks, // boolean\n    resolverConditionNames: metroConfig.resolver?.unstable_conditionNames, // string[]\n    resolverConditionsByPlatform: metroConfig.resolver?.unstable_conditionsByPlatform, // { [platform: string]: string[] }\n    resolverEnablePackageExports: metroConfig.resolver?.unstable_enablePackageExports, // boolean\n\n    serverImportBundleSupport: metroConfig.server?.experimentalImportBundleSupport, // boolean\n    serverServerRoot: metroConfig.server?.unstable_serverRoot, // string | null\n\n    transformerCollectDependenciesPath: metroConfig.transformer?.unstable_collectDependenciesPath, // string\n    transformerDependencyMapReservedName:\n      metroConfig.transformer?.unstable_dependencyMapReservedName, // string | null\n    transformerDisableModuleWrapping: metroConfig.transformer?.unstable_disableModuleWrapping, // boolean\n    transformerDisableNormalizePseudoGlobals:\n      metroConfig.transformer?.unstable_disableNormalizePseudoGlobals, // boolean\n    transformerCompactOutput: metroConfig.transformer?.unstable_compactOutput, // boolean\n    transformerAllowRequireContext: metroConfig.transformer?.unstable_allowRequireContext, // boolean\n  };\n}\n"],"names":["getMetroProperties","projectRoot","exp","metroConfig","sdkVersion","metroVersion","resolveMetroVersionFromProject","fileMapCacheManagerFactory","Boolean","unstable_fileMapCacheManagerFactory","undefined","perfLogger","unstable_perfLogger","resolverEnableSymlinks","resolver","unstable_enableSymlinks","resolverConditionNames","unstable_conditionNames","resolverConditionsByPlatform","unstable_conditionsByPlatform","resolverEnablePackageExports","unstable_enablePackageExports","serverImportBundleSupport","server","experimentalImportBundleSupport","serverServerRoot","unstable_serverRoot","transformerCollectDependenciesPath","transformer","unstable_collectDependenciesPath","transformerDependencyMapReservedName","unstable_dependencyMapReservedName","transformerDisableModuleWrapping","unstable_disableModuleWrapping","transformerDisableNormalizePseudoGlobals","unstable_disableNormalizePseudoGlobals","transformerCompactOutput","unstable_compactOutput","transformerAllowRequireContext","unstable_allowRequireContext"],"mappings":"AAAA;;;;QAUgBA,kBAAkB,GAAlBA,kBAAkB;AARa,IAAA,mBAA6C,WAA7C,6CAA6C,CAAA;AAQrF,SAASA,kBAAkB,CAChCC,WAAmB,EACnBC,GAAe,EACfC,WAAgC,GAAG,EAAE,EACrC;QAS0BA,GAAoB,EACpBA,IAAoB,EACdA,IAAoB,EACpBA,IAAoB,EAEvBA,IAAkB,EAC3BA,IAAkB,EAEAA,IAAuB,EAEzDA,IAAuB,EACSA,IAAuB,EAEvDA,IAAuB,EACCA,KAAuB,EACjBA,KAAuB;IAvBzD,OAAO;QACLC,UAAU,EAAEF,GAAG,CAACE,UAAU;QAC1BC,YAAY,EAAEC,CAAAA,GAAAA,mBAA8B,AAAa,CAAA,+BAAb,CAACL,WAAW,CAAC;QAEzDM,0BAA0B,EACxBC,OAAO,CAACL,WAAW,CAACM,mCAAmC,CAAC,IAAIC,SAAS;QACvEC,UAAU,EAAEH,OAAO,CAACL,WAAW,CAACS,mBAAmB,CAAC,IAAIF,SAAS;QAEjEG,sBAAsB,EAAEV,CAAAA,GAAoB,GAApBA,WAAW,CAACW,QAAQ,SAAyB,GAA7CX,KAAAA,CAA6C,GAA7CA,GAAoB,CAAEY,uBAAuB;QACrEC,sBAAsB,EAAEb,CAAAA,IAAoB,GAApBA,WAAW,CAACW,QAAQ,SAAyB,GAA7CX,KAAAA,CAA6C,GAA7CA,IAAoB,CAAEc,uBAAuB;QACrEC,4BAA4B,EAAEf,CAAAA,IAAoB,GAApBA,WAAW,CAACW,QAAQ,SAA+B,GAAnDX,KAAAA,CAAmD,GAAnDA,IAAoB,CAAEgB,6BAA6B;QACjFC,4BAA4B,EAAEjB,CAAAA,IAAoB,GAApBA,WAAW,CAACW,QAAQ,SAA+B,GAAnDX,KAAAA,CAAmD,GAAnDA,IAAoB,CAAEkB,6BAA6B;QAEjFC,yBAAyB,EAAEnB,CAAAA,IAAkB,GAAlBA,WAAW,CAACoB,MAAM,SAAiC,GAAnDpB,KAAAA,CAAmD,GAAnDA,IAAkB,CAAEqB,+BAA+B;QAC9EC,gBAAgB,EAAEtB,CAAAA,IAAkB,GAAlBA,WAAW,CAACoB,MAAM,SAAqB,GAAvCpB,KAAAA,CAAuC,GAAvCA,IAAkB,CAAEuB,mBAAmB;QAEzDC,kCAAkC,EAAExB,CAAAA,IAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAAkC,GAAzDzB,KAAAA,CAAyD,GAAzDA,IAAuB,CAAE0B,gCAAgC;QAC7FC,oCAAoC,EAClC3B,CAAAA,IAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAAoC,GAA3DzB,KAAAA,CAA2D,GAA3DA,IAAuB,CAAE4B,kCAAkC;QAC7DC,gCAAgC,EAAE7B,CAAAA,IAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAAgC,GAAvDzB,KAAAA,CAAuD,GAAvDA,IAAuB,CAAE8B,8BAA8B;QACzFC,wCAAwC,EACtC/B,CAAAA,IAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAAwC,GAA/DzB,KAAAA,CAA+D,GAA/DA,IAAuB,CAAEgC,sCAAsC;QACjEC,wBAAwB,EAAEjC,CAAAA,KAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAAwB,GAA/CzB,KAAAA,CAA+C,GAA/CA,KAAuB,CAAEkC,sBAAsB;QACzEC,8BAA8B,EAAEnC,CAAAA,KAAuB,GAAvBA,WAAW,CAACyB,WAAW,SAA8B,GAArDzB,KAAAA,CAAqD,GAArDA,KAAuB,CAAEoC,4BAA4B;KACtF,CAAC;CACH"}